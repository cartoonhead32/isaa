/* ============================================================================
   VARIABLES GLOBALES Y CONFIGURACIÓN (TEMA "PRO DARK EQUILIBRADO")
   ============================================================================ */

:root {
  /* --- NUEVA PALETA DE TEMA (Oscuro Equilibrado) --- */
  --theme-bg-body: #111827;                   /* Fondo de página (Azul muy oscuro) */
  --theme-bg-container: #1f2937;              /* Fondo de Cajas (Azul/Gris oscuro) */
  --theme-border-color: #374151;            /* Borde (Gris medio-oscuro) */
  
  --theme-primary-accent: #3b82f6;          /* Azul primario (brillante pero serio) */
  --theme-primary-accent-hover: #2563eb;  /* Azul primario más oscuro (hover) */
  
  --theme-secondary-button-bg: #4b5563;     /* Botón secundario (Gris medio-oscuro) */
  --theme-secondary-button-hover: #6b7280; /* Gris más claro (hover) */
  --theme-secondary-button-text: #e5e7eb;  /* Texto de botón secundario (claro) */

  --theme-text-primary: #d1d5db;            /* Texto principal (Gris claro) */
  --theme-text-secondary: #9ca3af;          /* Texto secundario (Gris medio) */
  --theme-text-bright: #FFFFFF;             /* Texto de botones primarios (blanco) */
  --theme-text-link: #60a5fa;               /* Azul para enlaces (más claro) */
  
  /* CAMBIO CLAVE: Inputs con fondo gris claro, no blanco */
  --theme-input-bg: #d1d5db;                /* Fondo de inputs (Gris claro) */
  --theme-input-text: #1f2937;              /* Texto de inputs (Oscuro) */

  /* --- VARIABLES ANTIGUAS MAPEADAS AL NUEVO TEMA --- */
  --primary-color: var(--theme-primary-accent);
  --secondary-color: var(--theme-primary-accent-hover);
  --text-color: var(--theme-text-primary);
  --light-gray: #374151; /* Gris claro ahora es un gris oscuro para fondos internos */
  --medium-gray: var(--theme-border-color);
  --dark-gray: var(--theme-text-secondary);
  --white: var(--theme-text-bright);
  
  --error-color: #ef4444;
  --success-color: #22c55e;
  
  --transition: all 0.3s ease;
  --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.2), 0 2px 4px -1px rgba(0, 0, 0, 0.12); /* Sombra para modo oscuro */
  --border-radius: 8px;
  
  --header-height: 60px;
  --sidebar-width: 200px; /* <-- Ancho consistente con el dashboard de usuario */
}

/* ============================================================================
   RESETEO Y ESTILOS GENERALES
   ============================================================================ */

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: Lato, sans-serif;
  line-height: 1.6;
  color: var(--theme-text-primary); /* CAMBIO: Color de texto principal */
  background: var(--theme-bg-body); /* CAMBIO: Fondo de página */
  overflow-x: hidden;
  position: relative;
}

body.modal-open {
  overflow: hidden;
}

a {
  text-decoration: none;
  color: var(--theme-text-link); /* CAMBIO: Color de enlace */
  cursor: pointer;
}

a:hover {
  color: var(--theme-primary-accent);
}

ul {
  list-style: none;
}

/* ============================================================================
   HEADER (Estilo de Dashboard de Usuario)
   ============================================================================ */

.main-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0 1.5rem;
  background-color: var(--theme-bg-container); /* CAMBIO: Fondo de contenedor */
  color: var(--theme-text-primary); /* CAMBIO: Color de texto */
  height: var(--header-height);
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: 200;
  box-shadow: var(--shadow);
  border-bottom: 1px solid var(--theme-border-color); /* CAMBIO: Borde */
}

.header-left {
  display: flex;
  align-items: center;
  gap: 15px;
}

.header-right {
  display: flex;
  align-items: center;
  gap: 15px;
}

.logout-btn {
  color: var(--theme-text-primary); /* CAMBIO: Color de texto secundario */
  background-color: transparent;
  border: none;
  font-size: 16px;
  border-radius: 4px;
  cursor: pointer;
  transition: var(--transition);
  margin: 0;
  font-family: inherit; /* <-- AÑADE ESTA LÍNEA */
}

.logout-btn:hover {
  color: var(--theme-text-bright);
}


/* ============================================================================
   LAYOUT PRINCIPAL Y SECCIONES (Estilo de Dashboard de Usuario)
   ============================================================================ */

.main-content {
  flex: 1;
  margin-top: var(--header-height);
  transition: var(--transition);
  position: relative;
  z-index: 10;
  padding: 2rem; /* <-- Padding añadido como en el usuario */
  background-color: transparent;
}

/* Si el sidebar se cierra (aunque el mediador no tenga botón) */
.sidebar.closed + .main-content {
  margin-left: 0;
}

.section {
  display: none;
}

.section.active-section {
  display: block;
}

.section-content {
  background-color: var(--theme-bg-container);
  border-radius: var(--border-radius);
  padding: 2rem;
  box-shadow: var(--shadow);
  border: 1px solid var(--theme-border-color);
}

.section h2 {
  color: var(--primary-color);
  font-size: 1.5rem;
  border-bottom: 1px solid var(--medium-gray); /* CAMBIO: Borde más sutil */
  padding-bottom: 1rem;
  margin-bottom: 1.5rem;
}

.section h3 {
  color: var(--primary-color);
  margin: 1.5rem 0 1rem 0;
  font-size: 1.17rem;
}

/* ========================================
   TABLA DE REPORTES (Re-estilizada)
   ======================================== */

.reportes-table {
  background-color: var(--theme-bg-container); 
  margin-top: 20px;
  box-shadow: var(--shadow);
  border-radius: var(--border-radius);
  overflow: hidden; /* <-- CLAVE: Esto cortará las esquinas de la tabla */
  border: 1px solid var(--theme-border-color);
  font-size: 0.9rem; /* Movido aquí desde la tabla */
}

.reportes-table table { 
  width: 100%; /* <-- 1. Adaptar al 100% del espacio */
  border-collapse: collapse; /* <-- 2. Quitar espacios entre celdas */
}

.reportes-table th, 
.reportes-table td {
    padding: 12px 15px;
    text-align: left;
    /* Mantenemos el borde en todas las celdas para consistencia */
    border: 1px solid var(--theme-border-color); 
    color: var(--theme-text-primary);
}

.reportes-table thead tr {
    background-color: var(--theme-bg-body); 
    color: var(--theme-text-bright);
    text-align: left;
    font-weight: bold;
    font-size: 0.95rem;
    text-transform: uppercase;
}

.reportes-table tbody tr {
    background-color: transparent; /* CAMBIO: Fondo transparente */
}

.reportes-table td:last-child {
    text-align: center;
    width: 150px;
}

/* Botón de Asignar en tabla */
.reportes-table .action-dropdown-btn { 
    background-color: var(--theme-primary-accent); /* CAMBIO: Color primario */
    color: white;
    padding: 8px 12px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 0.85rem;
    font-weight: bold;
    transition: background-color 0.3s ease;
}

.reportes-table .action-dropdown-btn:hover {
    background-color: var(--theme-primary-accent-hover); /* CAMBIO: Hover primario */
} 

#buen-trabajo {
  margin: 20px;
  font-size: 16px;
  color: var(--theme-text-secondary); /* CAMBIO: Color de texto */
}

/* ============================================================================
   VISTA DE CASO ACTIVO (Re-estilizada)
   ============================================================================ */

.caso-unico-container {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 2.5rem;
  margin-top: 1.5rem;
  margin-bottom: 2rem;
}

.info-caso {
  background-color: transparent; 
  border-left: none; 
}

.info-caso h3 {
  color: var(--theme-primary-accent); /* CAMBIO: Color primario */
  margin-top: 0;
  margin-bottom: 1.5rem; 
  border-bottom: 1px solid var(--theme-border-color); /* CAMBIO: Borde */
  padding-bottom: 0.75rem;
  font-size: 1.25rem;
}

.info-caso p {
  display: flex;
  justify-content: space-between;
  align-items: flex-start; 
  font-size: 1rem;
  line-height: 1.5;
  margin-bottom: 1rem;
  padding-bottom: 1rem;
  border-bottom: 1px solid var(--theme-border-color); /* CAMBIO: Borde */
}

.info-caso p:last-of-type {
  border-bottom: none; 
  margin-bottom: 0;
}

.info-caso p strong {
  display: inline; 
  margin-bottom: 0;
  font-size: 1rem;
  text-transform: none; 
  color: var(--theme-text-secondary); /* CAMBIO: Color secundario */
  font-weight: 500; 
  padding-right: 1rem;
  flex-shrink: 0; 
}

.info-caso p span {
  font-weight: 600; 
  color: var(--theme-text-primary); /* CAMBIO: Color primario */
  text-align: right;
  word-break: break-word;
}

#caso-ubicacion {
  font-size: 1.2rem; 
  font-weight: 700; 
  color: var(--theme-primary-accent); /* CAMBIO: Color primario */
  padding: 2px 6px;
  border-radius: 4px;
}

/* Botón de Resolver */
.btn-resolver {
  background-color: var(--theme-primary-accent); /* CAMBIO: Color primario */
  color: var(--white);
  width: 100%;
  padding: 1rem;
  font-size: 1rem;
  font-weight: bold;
  border: none;
  border-radius: var(--border-radius);
  cursor: pointer;
  transition: var(--transition);
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
}

.btn-resolver:hover {
  background-color: var(--theme-primary-accent-hover); /* CAMBIO: Hover primario */
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}

/* ============================================================================
   MODALES (Re-estilizados)
   ============================================================================ */

.modal {
  display: none;
  position: fixed;
  z-index: 1100;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.6); /* CAMBIO: Overlay más oscuro */
  align-items: center;
  justify-content: center;
  padding: 20px;
  box-sizing: border-box;
}

.modal[style*="block"] {
  display: flex !important;
}

.modal-content {
  background-color: var(--theme-bg-container); /* CAMBIO: Fondo */
  width: 100%;
  max-width: 600px;
  max-height: 90vh;
  border-radius: var(--border-radius);
  box-shadow: var(--shadow);
  border: 1px solid var(--theme-border-color); /* CAMBIO: Borde */
  animation: modalopen 0.3s;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  margin: 0;
}

.help-modal {
  max-width: 500px;
  max-height: 80vh;
}

@keyframes modalopen {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

.modal-header {
  background-color: var(--theme-bg-container); /* CAMBIO: Fondo */
  color: var(--theme-text-primary); /* CAMBIO: Texto */
  padding: 1.25rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-top-left-radius: var(--border-radius);
  border-top-right-radius: var(--border-radius);
  flex-shrink: 0;
  border-bottom: 1px solid var(--theme-border-color); /* CAMBIO: Borde */
}

.modal-header h2,
.modal-header h3 {
  margin: 0;
  font-size: 1.25rem;
  font-weight: bold;
  color: var(--theme-primary-accent); /* CAMBIO: Color primario */
}

.close-help-modal {
  color: var(--theme-text-secondary); /* CAMBIO: Color secundario */
  font-size: 1.5rem;
  cursor: pointer;
  background: none;
  border: none;
  padding: 0;
  line-height: 1;
}

.close-help-modal:hover {
  color: var(--theme-text-primary); /* CAMBIO: Color primario */
}

.modal-body {
  padding: 1.5rem;
  flex: 1;
  overflow-y: auto;
}

.help-modal h4 {
  color: var(--theme-primary-accent); /* CAMBIO: Color primario */
  margin-top: 1rem;
  margin-bottom: 0.5rem;
}

.help-modal ul {
  margin-left: 1.5rem;
  margin-bottom: 1rem;
  list-style-type: disc;
}

.help-modal li {
  margin-bottom: 0.5rem;
}

/* ============================================================================
   FOOTER Y AYUDA (Re-estilizados)
   ============================================================================ */

footer {
  position: fixed;
  bottom: 0;
  left: 0;
  width: var(--sidebar-width); /* CAMBIO: Ancho de sidebar */
  height: 50px;
  display: flex;
  align-items: center;
  z-index: 1000;
  /* El fondo se hereda del sidebar, no es necesario */
}

.help-icon {
  position: fixed;
  bottom: 10px; /* Ajustado */
  left: 15px; /* Ajustado */
  z-index: 1001;
}

.help-icon a {
  color: var(--theme-text-link); /* CAMBIO: Color de enlace */
  font-size: 1.7rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: var(--transition);
  text-decoration: none;
}

.help-icon a:hover {
  color: var(--theme-primary-accent);
}

.error-message {
  color: var(--error-color);
  display: block;
  margin-top: 5px;
  font-size: 1em;
  font-weight: bold;
}

/* ============================================================================
   ESTILOS RESPONSIVE (Ajustados del Dashboard de Usuario)
   ============================================================================ */

@media (max-width: 992px) {
  .caso-unico-container {
    grid-template-columns: 1fr;
    gap: 1rem;
  }
}

@media (max-width: 768px) {
  .main-content {
    margin-left: 0;
    padding: 1rem;
  }
  
  /* Hacemos que el sidebar se comporte como el del usuario en móvil */
  .sidebar {
     transform: translateX(-100%);
     z-index: 990; /* Debajo del header */
  }
  .sidebar.closed { /* 'closed' es el estado por defecto en móvil */
     transform: translateX(-100%);
  }
  
  /* Esta clase 'visible' no existe en el CSS del usuario, 
     así que la eliminamos para consistencia. 
     El usuario usa un toggle en el header que el mediador no tiene.
     El sidebar del mediador simplemente desaparecerá en móvil. */

  .section-content {
    padding: 1.5rem;
  }
  
  .modal {
    padding: 10px;
  }
  
  .modal-content {
    width: 100%;
    max-height: 95vh;
  }

  /* Ajuste de caso activo en móvil */
  .info-caso {
     border-top: 2px solid var(--primary-color);
     padding-top: 1.5rem;
  }
  .info-caso:first-child {
     border-top: none;
     padding-top: 0;
  }
  .info-caso p {
     flex-direction: column;
     align-items: flex-start;
     border-bottom: 1px solid var(--medium-gray);
     gap: 4px;
  }
  .info-caso p span {
    text-align: left;
  }
  #caso-ubicacion {
     font-size: 1.25rem; 
     padding: 4px 0;
     background-color: transparent;
  }
  .btn-resolver {
    font-size: 1rem;
    padding: 0.75rem;
  }
}

@media (max-width: 480px) {
  /* ... */
}